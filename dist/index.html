<!DOCTYPE html><html><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><style type="text/css">body,html{height:100%;image-rendering:pixelated;margin:0;padding:0;width:100%}body{background-color:#000}</style></head><body><div class="game-container"><canvas id="game" style="width: 50vw;"></canvas><!-- <canvas id="game" style="width: 100vw; height: 100vh;"></canvas> --><!-- <canvas id="game"></canvas> --><div id="menus"><div id="renders"></div></div><script type="text/javascript">!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=2)}([function(e,t,n){},,function(e,t,n){"use strict";function r(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}n.r(t);let o={tw:Math.floor(24*Math.random()+8),th:Math.floor(6*Math.random()+10)},i=16,a={SPACE:32,DOWN:40},d=1/60,l=document.getElementById("game"),s=l.getContext("2d"),c=l.width=o.tw*i,p=l.height=o.th*i,u=new Image;u.src="src/image_edit.png",u.onload=function(){s.imageSmoothingEnabled=!1};const m=[0,1,2,3];var y={},g=[],f=!1,h=!1,x=e=>Math.floor(e/i),v=(e,t)=>{return g[e+t*o.tw]};function w(e,t,n){switch(t){case a.SPACE:if(M)return n||function(){const e=(y.orientation+1)%4;y.orientation=m[e]}(),e.preventDefault(),!1;case a.DOWN:return void j()}}const b=e=>{let t=y.x,n=y.y;switch(function(e){const t=Math.round(e.y);t>=i*(o.th-1)?j():t<=0&&(y.orientation=2,e.y=.5)}(y),e){case 0:((e,t)=>{const n=v(x(t.x),x(e)),r=v(x(t.x+i-2),x(e));return 0!==n||0!==r})(n-=1,y)?y.orientation=2:y.y=n;break;case 2:((e,t)=>{const n=v(x(t.x),x(e+i-2)),r=v(x(t.x+i-2),x(e+i-2));return 0!==n||0!==r})(n+=1,y)?y.orientation=0:y.y=n;break;case 1:((e,t)=>{const n=v(x(e),x(t.y)),r=v(x(e),x(t.y+i-2));return 0!==n||0!==r})(t-=1,y)?y.orientation=3:y.x=t;break;case 3:((e,t)=>{const n=v(x(e+i-2),x(t.y)),r=v(x(e+i-2),x(t.y+i-2));return 0!==n||0!==r})(t+=1,y)?y.orientation=1:y.x=t}};function A(e,t,n){e.clearRect(0,0,c,p),function(e){for(var t=0;t<o.th;t++)for(var n=0;n<o.tw;n++){var r=v(n,t,!1);0===r?e.drawImage(u,0,0,i,i,n*i,t*i,i,i):r&&e.drawImage(u,(r-1)*i,0,i,i,n*i,t*i,i,i)}}(e),function(e,t){var n="right"===y.orientation?12:11;e.drawImage(u,n*i,0,i,i,y.x,y.y,i,i)}(e)}function E(e){return e.properties||(e.properties={}),{x:e.x,y:e.y,player:"player"==e.type,type:e.properties.type,orientation:e.orientation,start:{x:e.x,y:e.y}}}var B,C=0,k=r();new AudioContext;var S={mapping:{a:0,b:3,c:6,d:9,e:12,f:15,g:18,h:21,i:24,j:27,k:30,l:33,m:36,n:39,o:42,p:45,q:48,r:51,s:54,t:57,u:60,v:63,w:66,x:69,y:72,z:75,0:78,1:81,2:84,3:87,4:90,5:93,6:96,7:99,8:102,9:105," ":108},generateWord:e=>{for(var t=e.length,n=[],r=0;r<t;r++)n.push(S.mapping[e[r]]);return n},titleText:e=>{var t=document.getElementById("renders"),n=document.createElement("div");n.setAttribute("style","position: absolute; top: 10px; right: 0; left: 0;"),n.id="titleText",t.appendChild(n),e.forEach(e=>{var t=S.createSpan(e,10,40);n.appendChild(t)},void 0)},madeByText:e=>{var t=document.getElementById("renders"),n=document.createElement("div");n.setAttribute("style","position: absolute; bottom: 30px; right: 0; left: 0; margin: auto; width: 130px; height: 28px;"),n.id="madeByText",t.appendChild(n),e.forEach(e=>{var t=S.createSpan(e,3,10);n.appendChild(t)},void 0)},introText:(e,t,n,r)=>{var o,i=document.getElementById("renders"),a=document.createElement("div");switch(t){case"top":o="top: 150px;";break;case"bottom":o="bottom: 150px;";break;case"middle":o="top: 0; bottom: 0;"}a.setAttribute("style","position: absolute; "+o+" right: 0; left: 0; margin: auto; width: "+n+"px; height: 28px;"),a.id=r,i.appendChild(a),e.forEach(e=>{var t=S.createSpan(e,3,10);a.appendChild(t)},void 0)},button:(e,t,n={})=>{var r=document.getElementById("renders"),o=document.createElement("div");o.setAttribute("style","position: absolute; top: 60px; left: 10px; opacity: 1; animation: fadeinout 1s infinite;"),o.id=t,r.appendChild(o),e.forEach(e=>{var t=S.createSpan(e,4,15);o.appendChild(t)},void 0)},text:(e,t,n,r)=>{var o=document.getElementById("renders"),i=document.createElement("div");i.setAttribute("style","position: absolute; top: 0; right: 0; left: 0; bottom: 0; margin: auto; width: "+n+"px; height: 28px;"),i.id=t,o.appendChild(i),e.forEach(e=>{var t=S.createSpan(e,r.scale,r.margin);i.appendChild(t)},void 0)},endGameTitle:e=>{var t=document.getElementById("renders"),n=document.createElement("div");n.setAttribute("style","position: absolute; top: 100px; right: 0; left: 0; margin: auto; width: 450px; height: 28px;"),n.id="endGameTitle",t.appendChild(n),e.forEach(e=>{var t=S.createSpan(e,6,25);n.appendChild(t)},void 0)},createSpan:(e,t=1,n=0)=>{var r=document.createElement("div");return r.setAttribute("style","transform: scale("+t+"); margin-left: "+n+"px; image-rendering: pixelated; image-rendering: optimizespeed; image-rendering: crisp-edges; display: inline-block; height: 5px; width: 3px; background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAG8AAAAFAQMAAABxZCAfAAAABlBMVEX+/v4AAAAbQk4OAAAAU0lEQVQI12NYJqAkabJyGcskhwABBj4Gz2W3dhoIeV6ZFBk7uVKPgXWBwI4Ngk5XWrcGMkiAZC+tNBFmD3VaG74tMo/BTeCRKMvqjptBCwIMJPgAufkZ1sWwKkAAAAAASUVORK5CYII=) -"+e+"px 0;"),r}},T={startScreen:()=>{var e=S.generateWord("press space to play");S.button(e,"playButton");var t=S.generateWord("ovni perdido");S.titleText(t)},showIntroScreen:()=>{var e=S.generateWord("perdimos el control del platillo volante");S.introText(e,"top",190,"row1")},gameOver:()=>{var e=S.generateWord("game over");S.text(e,"gameOver",280,{scale:6,margin:25})},endGame:()=>{var e=S.generateWord("congratulations");S.endGameTitle(e);var t=S.generateWord("gems are on safe");S.text(t,"endGameSubtitle",305,{scale:4,margin:15});var n=S.generateWord("by samirh");S.madeByText(n)},showCanvas:()=>{document.getElementById("game").style.display="block"},removeText:e=>{var t=document.getElementById(e);console.log(t),t&&(console.log(t),t.remove())}};function I(){const e=o.tw,t=o.th,n=function(e,t,n,r){function o(){return Math.floor(9*Math.random())+2}const i=Array.from({length:t},()=>Array.from({length:e},o));function a(n,r){return n>0&&r>0&&n<e-1&&r<t-1&&i[r][n]>=1&&i[r][n]<=10}!function n(o,d){for(let n=0;n<2;n++)for(let r=0;r<2;r++)o+n<e&&d+r<t&&(i[d+r][o+n]=0);const l=[[0,-2],[0,2],[-2,0],[2,0]];l.sort(()=>Math.random()-.5);for(const[s,c]of l){const p=o+s,u=d+c;if(a(p,u)){let o=0;for(const[n,r]of l){const a=p+n,d=u+r;a>0&&d>0&&a<e-1&&d<t-1&&i[d][a]<=10&&i[d][a]>=1&&o++}(o>=2||p===r.x&&u===r.y)&&n(p,u)}}}(n.x,n.y);for(let n=0;n<e;n++)i[0][n]=o(),i[t-1][n]=o();for(let n=0;n<t;n++)i[n][0]=o(),i[n][e-1]=o();i[n.y][n.x]=0,i[n.y-1][n.x+1]=0,i[n.y-1][n.x]=0,i[n.y-2][n.x]=0,i[r.y][r.x-1]=0,i[r.y][r.x-2]=0,i[r.y-1][r.x-1]=0,i[r.y-2][r.x-1]=0;const d=i.flat();return{layers:[{opacity:1,name:"Tile Layer 1",width:e,data:d,height:t,visible:!0,y:0,x:0,type:"tilelayer",id:1},{opacity:1,name:"Object Layer 1",visible:!0,objects:[{name:"start",width:16,height:16,visible:!0,gid:28,y:16*(n.y-1),x:16*n.x,rotation:0,type:"player",id:1,orientation:2},{name:"end",width:16,height:16,visible:!0,gid:29,y:16*r.y,x:16*r.x,rotation:0,type:"goal",id:2}],draworder:"topdown",y:0,x:0,type:"objectgroup",id:2}],orientation:"orthogonal",tileheight:16,tiledversion:"1.2.4",tilewidth:16,version:1.2,height:t,width:e,renderorder:"right-down",nextlayerid:3,tilesets:[{source:"tileset.tsx",firstgid:1}],infinite:!1,type:"map",nextobjectid:4}}(e,t,{x:2,y:2},{x:o.tw-1,y:o.th-1});return console.table("* *",n.layers[0].data),console.table("* *",e," ",t),console.table("* *",o.tw," ",o.th),n}window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)});let M=!1;function j(){T.removeText("playButton"),T.removeText("titleText"),M=!0,console.log("start game"),function(e){y={},g=[],f=!1,h=!1;for(var t=e.layers[0].data,n=e.layers[1].objects,r=0;r<n.length;r++){var o=n[r],i=E(o);switch(o.type){case"player":y=i}}g=t}(I())}console.log("inProgress",M),T.startScreen(),function e(){for(B=r(),C+=Math.min(1,(B-k)/1e3);C>d;)C-=d,M&&b(y.orientation);f||h||A(s),k=B,0,requestAnimationFrame(e,l)}(),document.addEventListener("keydown",e=>{if(32!==e.keyCode||M)return M&&w(e,e.keyCode,!1);j()},!1),document.addEventListener("keyup",e=>{e.keyCode},!1);n(0)}]);</script></div></body></html>